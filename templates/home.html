{% extends "base.html" %}


{% load static %}

{% block content %}


{% if messages %}
  {% for message in messages %}
    <div class="alert alert-success alert-dismissible fade show mx-auto mt-2 pb-0" role="alert" style="width: 40%;">
      <p class="text-center">{{ message }}</p>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  {% endfor %}
{% endif %}


<div class="container">
    <form method="get" action="{% url 'post_list' %}" style="margin: auto;">
        <input type="text" name="q" placeholder="Search">
        <select name="category">
            <option value="" selected>Filter by Category</option>
            {% for category in categories %}
                <option value="{{ category.name }}">{{ category.name }}</option>
            {% endfor %}
        </select>
        <input type="date" name="date" placeholder="Filter by Date">
        <button type="submit" class="btn border-1 rounded-0 border-success">Search</button>
    </form>
</div>


<div class="content-wrapper">
    <div class="inner-container container">
        <div class="row">
            <div class="section-header col-md-12">
                <h2>All Blogs</h2>
            </div> <!-- /.section-header -->
        </div> <!-- /.row -->
        <div class="projects-holder-3">
            <div class="filter-categories">
                <ul class="project-filter">
                    <li class="filter" data-filter="all">
                        <a href="{% url 'home' %}" class="">
                            <span class="bg-secondary border-0">
                                All
                            </span>
                        </a>
                    </li>
                    {% for category in categories %}
                    <li class="filter" data-filter="all">
                        <a href="{% url 'home_category' category.slug %}" class="">
                            <span class="bg-secondary border-0">
                                {{category.name}}
                            </span>
                        </a>
                    </li>
                    {% endfor %}
                    
                </ul>
            </div>
            <div class="projects-holder">
                <div class="row">
                    {% if posts %}
                      

                    {% for post in posts %}

                    <div class="col-md-4 project-item mix design">
                        <div class="project-thumb">
                            <img src="{{ post.image.url }}" alt="">
                            <div class="overlay-b">
                                <div class="overlay-inner">
                                    <a href="images/projects/project_1.jpg" class="fancybox fa fa-expand" title="Project Title Here"></a>
                                </div>
                            </div>
                        </div>
                        <div class="box-content project-detail">
                            <h2>
                                <a target="_blank" href="{% url 'post_detail' post.pk %}">{{ post.title }}</a>
                            </h2>
                            <p>{{ post.body|truncatewords:15 }}</p>

                            
                            <ul class="d-flex flex-wrap">
                                <li class="text-dark">Category:</li>
                                {% for category in post.category.all %}
                                    <li class="mx-2">{{ category.name }}</li>
                                {% endfor %}
                            </ul>



                            {% if user.is_authenticated %}


                            <a href="{% url 'save_post' post.pk %}" class="btn btn-sm border-1  border-info">Save Post</a>
                            {% endif %}
                        </div>
                    </div> <!-- /.project-item -->
                      
                    {% endfor %}


                    {% else%}
                    <h1 class="text-center">No post available</h1>
                    {% endif %}
                </div> <!-- /.row -->
                <div class="load-more">
                    <a href="javascript:void(0)" class="load-more">Load More</a>
                </div>
            </div> <!-- /.projects-holder -->
        </div> <!-- /.projects-holder-2 -->
    </div> <!-- /.inner-content -->
</div> <!-- /.content-wrapper -->
  
{% endblock content %}